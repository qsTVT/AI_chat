# 答辩准备指南：AI 智能助手项目

## 一、 项目概述
本项目是一个集成了**人脸识别安全认证**与**大语言模型（LLM）对话能力**的现代化 Web 应用。
**核心亮点**：
1.  **多模态认证**：支持传统的账号密码登录与先进的人脸识别登录。
2.  **实时流式对话**：基于 WebSocket/StreamingHTTP 技术，实现像 ChatGPT 一样的打字机效果。
3.  **数据驱动决策**：内置可视化分析仪表盘，实时监控用户画像（年龄/性别）与系统活跃度。

## 二、 核心技术栈
**后端**：
*   **Django**: 高效的 Python Web 框架，负责业务逻辑、API 路由与数据管理。
*   **LangChain**: 用于构建 LLM 应用的框架，管理提示词模板（Prompt Template）与历史对话上下文（Memory）。
*   **MySQL**: 存储用户信息与人脸特征（业务数据）。
*   **Face Recognition**: 基于 dlib 的人脸识别库，实现人脸检测、特征提取（128维向量）与比对。

**前端**：
*   **Vue.js + Element UI**: 构建响应式单页应用（SPA）体验，提供美观的 UI 组件。
*   **ECharts**: 实现高性能的数据可视化图表（折线图、饼图）。
*   **Axios**: 处理前后端异步 HTTP 请求。

## 三、 关键功能与实现原理（答辩重点）

### 1. 人脸识别登录
*   **原理**：前端调用摄像头截取帧 -> 发送 Base64 图片到后端 -> 后端使用 `face_recognition` 库检测人脸位置 -> 提取 128 维特征向量 -> 计算与数据库中已知人脸向量的欧氏距离 -> 距离小于阈值（如 0.45）则判定为同一人。
*   **难点**：活体检测（本项目简化处理）、光线影响、多张人脸处理（取最大人脸）。

### 2. AI 流式对话
*   **原理**：
    1.  前端发送用户问题。
    2.  后端通过 `LangChain` 组装 Prompt（包含 System Prompt + 历史对话记录）。
    3.  调用 Ollama/Qwen 模型进行推理。
    4.  使用 Django 的 `StreamingHttpResponse` 将模型生成的 Token 实时推送到前端。
    5.  前端接收分块数据并追加显示，实现“打字机”效果。
*   **上下文记忆**：通过 `ChatMessageHistory` 在数据库中存储每一轮对话，每次提问时自动注入历史记录，解决“多轮对话遗忘”问题。

### 3. 数据可视化
*   **原理**：后端使用 Django ORM 的聚合函数（`Count`, `TruncDate`）对海量日志数据进行预处理 -> 前端 ECharts 接收 JSON 数据并渲染。
*   **亮点**：Flexbox 响应式布局，自动适配不同屏幕尺寸；后端直接计算年龄分布区间，减轻前端计算压力。

## 四、 常见答辩问题预测 (Q&A)

**Q1: 为什么选择 Django 而不是 Flask/FastAPI？**
*   **A**: Django “Batteries included”（自带电池），内置了强大的 ORM、Admin 后台和安全机制（CSRF/XSS 防护），非常适合快速构建功能完备的企业级应用。对于本项目的数据管理和后台统计需求，Django 开发效率更高。

**Q2: 人脸识别的安全性如何保证？**
*   **A**: 我们设置了严格的阈值（0.45）来降低误识率。密码在数据库中是哈希存储（PBKDF2），人脸图片也是存储在服务器受限目录。未来可以加入活体检测（眨眼/张嘴）来防范照片攻击。

**Q3: 如何解决大模型“幻觉”或“不记得之前说过的话”？**
*   **A**: 我们引入了 LangChain 的 `RunnableWithMessageHistory`，将用户的历史对话持久化存储在数据库中，并在每次请求时作为 Context 输入给模型，从而保证对话的连贯性。

**Q4: 系统并发量大了怎么办？**
*   **A**: 目前使用 MySQL，未来可以：1. 数据库读写分离；2. 将 Session 存储迁移到 Redis；3. 将人脸特征比对迁移到向量数据库（如 Milvus）以加速检索；4. 使用 Celery 异步处理耗时任务。

## 五、 演示建议
1.  **开场**：先展示最炫酷的功能——**人脸登录**，秒进系统，给评委留下深刻第一印象。
2.  **对话**：演示多轮对话，比如先告诉 AI “我叫小明”，然后问它 “我叫什么”，证明系统有记忆。
3.  **图表**：展示可视化大屏，拖动窗口大小，展示响应式布局的丝滑体验。
